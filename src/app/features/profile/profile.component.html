<div class="min-h-screen py-8 px-4 md:px-6 lg:px-8">
  <div class="max-w-4xl mx-auto space-y-8">

    <!-- Header -->
    <div>
      <h1 class="text-3xl md:text-4xl font-bold text-foreground">
        {{ t('profile') || 'Profile' }}
      </h1>
      <p class="text-muted-foreground mt-2">
        Manage your account information
      </p>
    </div>

    <!-- Profile Card -->
    <app-card class="shadow-md">
      <app-card-content class="p-6">
        <div class="flex flex-col sm:flex-row items-center gap-6">

          <div class="text-center sm:text-start flex-1">
            <h2 class="text-2xl font-bold text-card-foreground">
              {{ fullName() }}
            </h2>

            <div class="flex flex-wrap justify-center sm:justify-start gap-2 mt-3">
              @for (role of profileData()?.roles ?? []; track role) {
                <app-badge class="capitalize">
                  {{ role }}
                </app-badge>
              }
            </div>
          </div>

          <app-button variant="outline" class="gap-2" (click)="toggleEditMode()">
            <span>{{ isEditMode() ? '❌' : '✏️' }}</span>
            {{ isEditMode() ? 'Cancel' : 'Edit Profile' }}
          </app-button>
        </div>
      </app-card-content>
    </app-card>

    <!-- Account Information -->
    <app-card class="shadow-md">
      <app-card-header>
        <app-card-title>Account Information</app-card-title>
        <app-card-description>Your personal details</app-card-description>
      </app-card-header>

      <app-card-content>

        @if (!editForm) {
          <p class="text-muted-foreground">Loading profile...</p>
        }

        @if (editForm) {
    <form [formGroup]="editForm" class="space-y-5">

            <div>
              <label class="text-sm font-medium">Full Name</label>
              <input
                formControlName="fullName"
                class="w-full px-3 py-2 border rounded-md"
                [readonly]="!isEditMode()"
              />
            </div>

            <div>
              <label class="text-sm font-medium">Email</label>
              <input
                formControlName="email"
                readonly
                class="w-full px-3 py-2 border rounded-md bg-muted"
              />
            </div>

            <div>
              <label class="text-sm font-medium">Phone Number</label>
              <input
                formControlName="phoneNumber"
                class="w-full px-3 py-2 border rounded-md"
                [readonly]="!isEditMode()"
              />
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="text-sm font-medium">Street</label>
                <input
                  formControlName="street"
                  class="w-full px-3 py-2 border rounded-md"
                />
              </div>

              <div>
                <label class="text-sm font-medium">City</label>
                <input
                  formControlName="city"
                  class="w-full px-3 py-2 border rounded-md"
                />
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="text-sm font-medium">Building No</label>
                <input
                  formControlName="buildingNo"
                  class="w-full px-3 py-2 border rounded-md"
                />
              </div>

              <div>
                <label class="text-sm font-medium">Apartment</label>
                <input
                  formControlName="apartment"
                  class="w-full px-3 py-2 border rounded-md"
                />
              </div>
            </div>

            @if (isEditMode()) {
              <div class="flex gap-3 pt-4">
                <app-button
                  class="flex-1"
                  (click)="saveProfile()"
                  [disabled]="isSaving()"
                >
                  {{ isSaving() ? 'Saving...' : 'Save Changes' }}
                </app-button>
              </div>
            }

          </form>
        }

      </app-card-content>
    </app-card>

  </div>
</div>
