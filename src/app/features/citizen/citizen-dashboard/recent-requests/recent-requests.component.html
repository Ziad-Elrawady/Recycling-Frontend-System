<app-card class="shadow-md">
  <app-card-header>
<app-card-title class="text-2xl">
  {{ 'DASHBOARD.RECENT_REQUESTS.TITLE' | translate }}
</app-card-title>

<app-card-description>
  {{ 'DASHBOARD.RECENT_REQUESTS.SUBTITLE' | translate }}
</app-card-description>

  </app-card-header>
  <app-card-content>
    <div class="space-y-4">
      @for (request of requests; track request.id) {
<app-request-card
  [request]="request"
  [clickable]="true"
  [showActions]="true"
  [isCanceling]="cancelingOrderId === request.id"
  (onCancel)="cancelOrder($event)"
  (onCardClick)="toggleRequest($event)"
>
</app-request-card>
@if (selectedRequestId === request.id) {
  <div class="request-details-expanded">
    <div class="details-grid">

      <div>
<strong>üì¶ {{ 'DASHBOARD.RECENT_REQUESTS.QUANTITY' | translate }}:</strong>
{{ getQuantityLabel(request) }}

      </div>

      <div>
<strong>üè† {{ 'DASHBOARD.RECENT_REQUESTS.ADDRESS' | translate }}:</strong>
        {{ request.street }}, {{ request.buildingNo }},
        {{ request.city }}
      </div>

      <div>
<strong>üìÖ {{ 'DASHBOARD.RECENT_REQUESTS.CREATED_AT' | translate }}:</strong>
        {{ request.orderDate | date:'mediumDate' }}
      </div>

      @if (request.collectorName) {
        <div>
<strong>üöõ {{ 'DASHBOARD.RECENT_REQUESTS.COLLECTOR' | translate }}:</strong>
          {{ request.collectorName }}
        </div>
      }

      @if (request.status === 'completed') {
<div class="text-green-600 font-semibold">
  ‚úÖ {{ 'DASHBOARD.RECENT_REQUESTS.COMPLETED' | translate }}
</div>

      }

    </div>
  </div>
}


      }
      @if (requests.length === 0) {
        <div class="text-center py-8 text-muted-foreground">
          <span class="text-4xl block mb-2">üì¶</span>
<p>
  {{ 'DASHBOARD.RECENT_REQUESTS.EMPTY' | translate }}
</p>
        </div>
      }
    </div>
  </app-card-content>
</app-card>
@if (flashMessage) {
  <div
    class="alert mb-4"
    [class.alert-success]="flashType === 'success'"
    [class.alert-danger]="flashType === 'error'"
  >
    {{ flashMessage }}
  </div>
}
